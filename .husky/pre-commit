#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Check for unregistered tabs
echo "üîç Checking for unregistered tabs..."
if node scripts/find-unregistered-tabs.js > /dev/null 2>&1; then
  echo "‚úÖ All tabs are registered"
else
  echo ""
  echo "‚ùå ERROR: Unregistered tabs detected!"
  echo ""
  node scripts/find-unregistered-tabs.js
  echo ""
  echo "Please register all tabs in src/lib/modules/tabs-registry.ts before committing."
  echo ""
  exit 1
fi

# Check for missing icons
echo "üîç Checking for missing tab icons..."
if node scripts/audit-tab-icons.js > /dev/null 2>&1; then
  echo "‚úÖ All registered tabs have valid icons"
else
  echo ""
  echo "‚ùå ERROR: Some tabs are missing icons!"
  echo ""
  node scripts/audit-tab-icons.js
  echo ""
  echo "Please add missing icons to src/lib/modules/icon-map.ts before committing."
  echo ""
  exit 1
fi

echo "‚úÖ Tab validation passed"
